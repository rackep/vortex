,
    {
      "name" : "backend",
      "image" : var.backend_container_image,
      "cpu" : 256,
      "memory" : 512,
      "essential" : true,
      "portMappings" : [
        {
          "name" : "8000",
          "containerPort" : 8000,
          "hostPort" : 8000,
          "protocol" : "tcp"
        }
      ],
      "command" : [
        "CMD-SHELL",
        "python manage.py migrate && python manage.py runserver 0.0.0.0:8000"
      ],
      "environment" : [
        {
          "name" : "POSTGRES_HOST",
          "value" : var.postgres_host # "db"
        }
      ],
      "healthCheck" : {
        "command" : [
          "CMD-SHELL",
          "curl -f http://localhost:8000/swagger/ || exit 1"
        ],
        "interval" : 30,
        "timeout" : 5,
        "retries" : 3
      }
    }

======================


container_definitions = jsonencode([
  {
    "name" : "frontend",
    "image" : var.frontend_container_image,
    "cpu" : 256,
    "memoryReservation" : 256,
    "essential" : true,
    "portMappings" : [
      {
        "name" : "80",
        "containerPort" : 80,
        "hostPort" : 80,
        "protocol" : "tcp",
        "appProtocol" : "http"
      }
    ]
  },
  {
    "name" : "backend",
    "image" : var.backend_container_image,
    "cpu" : 256,
    "memory" : 256,
    "essential" : false,
    "portMappings" : [
      {
        "name" : "8000",
        "containerPort" : 8000,
        "hostPort" : 8000,
        "protocol" : "tcp"
      }
    ],
    "command" : [
      "sh",
      "-c",
      "python manage.py runserver 0.0.0.0:8000"
    ]
    "environment" : [
      {
        "name" : "POSTGRES_HOST",
        "value" : var.postgres_host # "db"
      }
    ]
  }